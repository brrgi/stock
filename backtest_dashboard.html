<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°±í…ŒìŠ¤íŒ… íƒ€ì„ë¼ì¸ - 2025ë…„ ë§¤ì£¼ ê¸ˆìš”ì¼</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3.0.1/dist/chartjs-plugin-annotation.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: #0a0e27;
            color: #d1d4dc;
            height: 100vh;
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 1.8em;
            color: white;
            margin-bottom: 5px;
        }

        .header p {
            font-size: 0.9em;
            color: rgba(255,255,255,0.9);
        }

        .main-container {
            display: flex;
            height: calc(100vh - 100px);
        }

        /* ì™¼ìª½ - ë‚ ì§œ íƒ€ì„ë¼ì¸ */
        .timeline-panel {
            width: 250px;
            background: #131722;
            border-right: 2px solid #2a2e39;
            overflow-y: auto;
        }

        .timeline-item {
            padding: 15px 20px;
            border-bottom: 1px solid #2a2e39;
            cursor: pointer;
            transition: all 0.2s;
        }

        .timeline-item:hover {
            background: #1e222d;
        }

        .timeline-item.active {
            background: #667eea;
            border-left: 4px solid #ffd700;
        }

        .timeline-date {
            font-size: 1.1em;
            font-weight: bold;
            color: #fff;
            margin-bottom: 5px;
        }

        .timeline-stats {
            font-size: 0.85em;
            color: #787b86;
        }

        .signal-badge {
            background: #26a69a;
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.8em;
            margin-left: 5px;
        }

        /* ê°€ìš´ë° - ì¢…ëª© ë¦¬ìŠ¤íŠ¸ */
        .stocks-panel {
            width: 350px;
            background: #0d1117;
            border-right: 2px solid #2a2e39;
            overflow-y: auto;
        }

        .stocks-header {
            padding: 20px;
            background: #131722;
            border-bottom: 2px solid #2a2e39;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .stocks-header h2 {
            font-size: 1.3em;
            color: #fff;
            margin-bottom: 5px;
        }

        .stocks-header p {
            font-size: 0.9em;
            color: #787b86;
        }

        .stock-item {
            padding: 15px 20px;
            border-bottom: 1px solid #2a2e39;
            cursor: pointer;
            transition: all 0.2s;
        }

        .stock-item:hover {
            background: #1e222d;
        }

        .stock-item.active {
            background: #2a2e39;
            border-left: 4px solid #26a69a;
        }

        .stock-name {
            font-size: 1.1em;
            font-weight: bold;
            color: #fff;
            margin-bottom: 5px;
        }

        .stock-info {
            display: flex;
            justify-content: space-between;
            font-size: 0.85em;
            color: #787b86;
        }

        .stock-score {
            color: #ffd700;
            font-weight: bold;
        }

        /* ì˜¤ë¥¸ìª½ - ì°¨íŠ¸ ì˜ì—­ */
        .chart-panel {
            flex: 1;
            background: #0a0e27;
            overflow-y: auto;
            padding: 30px;
        }

        .chart-header {
            margin-bottom: 20px;
        }

        .chart-title {
            font-size: 1.8em;
            color: #fff;
            margin-bottom: 10px;
        }

        .chart-meta {
            display: flex;
            gap: 30px;
            font-size: 0.95em;
        }

        .meta-item {
            color: #787b86;
        }

        .meta-value {
            color: #fff;
            font-weight: bold;
            margin-left: 5px;
        }

        .meta-value.positive {
            color: #26a69a;
        }

        .meta-value.negative {
            color: #ef5350;
        }

        .chart-container {
            background: #131722;
            padding: 20px;
            border-radius: 15px;
            height: 500px;
            margin-bottom: 20px;
        }

        .score-cards {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }

        .score-card {
            background: #131722;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }

        .score-label {
            color: #787b86;
            font-size: 0.9em;
            margin-bottom: 10px;
        }

        .score-value {
            font-size: 2em;
            font-weight: bold;
            color: #ffd700;
        }

        .empty-state {
            text-align: center;
            padding: 100px 20px;
            color: #787b86;
        }

        .empty-state h2 {
            font-size: 2em;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ“Š ë°±í…ŒìŠ¤íŒ… íƒ€ì„ë¼ì¸</h1>
        <p>2025ë…„ ë§¤ì£¼ ê¸ˆìš”ì¼ ì§„ì… ì‹ í˜¸ ì¶”ì  - ì§„ì… ì‹œì ë¶€í„° í˜„ì¬ê¹Œì§€ ìˆ˜ìµë¥ </p>
    </div>

    <div class="main-container">
        <!-- ì™¼ìª½: ë‚ ì§œ íƒ€ì„ë¼ì¸ -->
        <div class="timeline-panel" id="timeline-panel">
        </div>

        <!-- ê°€ìš´ë°: ì¢…ëª© ë¦¬ìŠ¤íŠ¸ -->
        <div class="stocks-panel">
            <div class="stocks-header">
                <h2 id="selected-date">ë‚ ì§œ ì„ íƒ</h2>
                <p id="selected-stats">ì™¼ìª½ì—ì„œ ë‚ ì§œë¥¼ ì„ íƒí•˜ì„¸ìš”</p>
            </div>
            <div id="stocks-list"></div>
        </div>

        <!-- ì˜¤ë¥¸ìª½: ì°¨íŠ¸ -->
        <div class="chart-panel">
            <div class="empty-state" id="chart-content">
                <h2>ğŸ“ˆ</h2>
                <p>ì¢…ëª©ì„ ì„ íƒí•˜ë©´ ì§„ì… ì´í›„ ê°€ê²© ì¶”ì´ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
            </div>
        </div>
    </div>

    <script>
        const timelineData = {"2025-06-20": {"total_stocks": 5, "signals": 0, "stocks": []}, "2025-06-27": {"total_stocks": 5, "signals": 0, "stocks": []}, "2025-07-04": {"total_stocks": 5, "signals": 0, "stocks": []}, "2025-07-11": {"total_stocks": 5, "signals": 0, "stocks": []}, "2025-07-18": {"total_stocks": 5, "signals": 0, "stocks": []}, "2025-07-25": {"total_stocks": 5, "signals": 0, "stocks": []}, "2025-08-01": {"total_stocks": 5, "signals": 0, "stocks": []}, "2025-08-08": {"total_stocks": 5, "signals": 1, "stocks": [{"date": "2025-08-08 00:00:00", "price": 63800, "rs_rating": 90, "ryan_score": 135, "ryan_signal": true, "ryan_entry": 65365.299999999996, "ryan_stop": 60789.729, "minervini_score": 65, "minervini_signal": false, "minervini_entry": 65365.299999999996, "ticker": "035720", "current_price": 63800, "return_pct": 0.0}]}, "2025-08-15": {"total_stocks": 4, "signals": 0, "stocks": []}, "2025-08-22": {"total_stocks": 4, "signals": 0, "stocks": []}, "2025-08-29": {"total_stocks": 4, "signals": 0, "stocks": []}, "2025-09-05": {"total_stocks": 4, "signals": 0, "stocks": []}, "2025-09-12": {"total_stocks": 4, "signals": 1, "stocks": [{"date": "2025-09-12 00:00:00", "price": 328500, "rs_rating": 90, "ryan_score": 170, "ryan_signal": true, "ryan_entry": 329829.49999999994, "ryan_stop": 306741.43499999994, "minervini_score": 85, "minervini_signal": false, "minervini_entry": 329829.49999999994, "ticker": "000660", "current_price": 328500, "return_pct": 0.0}]}, "2025-09-19": {"total_stocks": 3, "signals": 0, "stocks": []}, "2025-09-26": {"total_stocks": 3, "signals": 0, "stocks": []}, "2025-10-03": {"total_stocks": 3, "signals": 1, "stocks": [{"date": "2025-10-03 00:00:00", "price": 89000, "rs_rating": 90, "ryan_score": 135, "ryan_signal": true, "ryan_entry": 90390.29999999999, "ryan_stop": 84062.97899999999, "minervini_score": 65, "minervini_signal": false, "minervini_entry": 90390.29999999999, "ticker": "005930", "current_price": 89000, "return_pct": 0.0}]}, "2025-10-10": {"total_stocks": 2, "signals": 0, "stocks": []}, "2025-10-17": {"total_stocks": 2, "signals": 0, "stocks": []}, "2025-10-24": {"total_stocks": 2, "signals": 0, "stocks": []}, "2025-10-31": {"total_stocks": 2, "signals": 0, "stocks": []}, "2025-11-07": {"total_stocks": 2, "signals": 1, "stocks": [{"date": "2025-11-07 00:00:00", "price": 382000, "rs_rating": 90, "ryan_score": 135, "ryan_signal": true, "ryan_entry": 423923.49999999994, "ryan_stop": 394248.855, "minervini_score": 65, "minervini_signal": false, "minervini_entry": 423923.49999999994, "ticker": "051910", "current_price": 382000, "return_pct": 0.0}]}, "2025-11-14": {"total_stocks": 1, "signals": 0, "stocks": []}, "2025-11-21": {"total_stocks": 1, "signals": 0, "stocks": []}, "2025-11-28": {"total_stocks": 1, "signals": 0, "stocks": []}, "2025-12-05": {"total_stocks": 1, "signals": 1, "stocks": [{"date": "2025-12-05 00:00:00", "price": 315000, "rs_rating": 90, "ryan_score": 180, "ryan_signal": true, "ryan_entry": 316816.49999999994, "ryan_stop": 294639.345, "minervini_score": 85, "minervini_signal": false, "minervini_entry": 316816.49999999994, "ticker": "005380", "current_price": 315000, "return_pct": 0.0}]}};
        const stockHistory = {"000660": {"dates": ["2025-06-20", "2025-06-27", "2025-07-04", "2025-07-11", "2025-07-18", "2025-07-25", "2025-08-01", "2025-08-08", "2025-08-15", "2025-08-22", "2025-08-29", "2025-09-05", "2025-09-12"], "prices": [257000, 284000, 270500, 294500, 269000, 266000, 258000, 256500, 276500, 251000, 269000, 273500, 328500], "rs_ratings": [70, 80, 80, 80, 80, 80, 70, 70, 80, 70, 80, 80, 90], "ryan_scores": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 170], "minervini_scores": [40, 55, 55, 55, 55, 55, 40, 40, 75, 40, 55, 75, 85], "current_price": "328500", "name": "000660"}, "005380": {"dates": ["2025-06-20", "2025-06-27", "2025-07-04", "2025-07-11", "2025-07-18", "2025-07-25", "2025-08-01", "2025-08-08", "2025-08-15", "2025-08-22", "2025-08-29", "2025-09-05", "2025-09-12", "2025-09-19", "2025-09-26", "2025-10-03", "2025-10-10", "2025-10-17", "2025-10-24", "2025-10-31", "2025-11-07", "2025-11-14", "2025-11-21", "2025-11-28", "2025-12-05"], "prices": [210000, 205000, 210500, 208000, 210500, 216500, 210000, 212500, 217500, 220000, 220000, 220000, 223500, 214000, 214500, 220000, 217000, 243000, 252500, 290000, 264000, 272500, 259500, 261500, 315000], "rs_ratings": [50, 50, 54, 52, 52, 56, 56, 55, 54, 56, 57, 56, 54, 50, 50, 54, 53, 70, 70, 80, 70, 80, 70, 70, 90], "ryan_scores": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 180], "minervini_scores": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 40, 55, 40, 55, 40, 40, 85], "current_price": "315000", "name": "005380"}, "005930": {"dates": ["2025-06-20", "2025-06-27", "2025-07-04", "2025-07-11", "2025-07-18", "2025-07-25", "2025-08-01", "2025-08-08", "2025-08-15", "2025-08-22", "2025-08-29", "2025-09-05", "2025-09-12", "2025-09-19", "2025-09-26", "2025-10-03"], "prices": [59500, 60800, 63300, 62600, 67100, 65900, 68900, 71800, 71600, 71400, 69700, 69500, 75400, 79700, 83300, 89000], "rs_ratings": [50, 53, 61, 58, 70, 64, 70, 70, 70, 70, 70, 70, 70, 80, 80, 90], "ryan_scores": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 135], "minervini_scores": [0, 0, 0, 0, 0, 0, 40, 40, 40, 40, 40, 40, 40, 55, 55, 65], "current_price": "89000", "name": "005930"}, "035720": {"dates": ["2025-06-20", "2025-06-27", "2025-07-04", "2025-07-11", "2025-07-18", "2025-07-25", "2025-08-01", "2025-08-08"], "prices": [66600, 60900, 58400, 60000, 56900, 55800, 55500, 63800], "rs_ratings": [90, 80, 80, 80, 80, 80, 80, 90], "ryan_scores": [0, 0, 0, 0, 0, 0, 0, 135], "minervini_scores": [85, 55, 55, 55, 55, 55, 55, 65], "current_price": "63800", "name": "035720"}, "051910": {"dates": ["2025-06-20", "2025-06-27", "2025-07-04", "2025-07-11", "2025-07-18", "2025-07-25", "2025-08-01", "2025-08-08", "2025-08-15", "2025-08-22", "2025-08-29", "2025-09-05", "2025-09-12", "2025-09-19", "2025-09-26", "2025-10-03", "2025-10-10", "2025-10-17", "2025-10-24", "2025-10-31", "2025-11-07"], "prices": [211500, 209000, 264500, 272000, 272500, 307000, 290000, 276500, 282500, 287500, 277500, 274500, 290000, 291000, 282500, 277500, 279000, 339000, 401000, 397500, 382000], "rs_ratings": [50, 50, 54, 57, 58, 70, 70, 70, 70, 70, 63, 64, 70, 70, 55, 53, 55, 70, 80, 90, 90], "ryan_scores": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 135], "minervini_scores": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 40, 55, 65, 65], "current_price": "382000", "name": "051910"}};
        let currentChart = null;
        let selectedDate = null;
        let selectedTicker = null;

        // íƒ€ì„ë¼ì¸ ë Œë”ë§
        function renderTimeline() {{
            const panel = document.getElementById('timeline-panel');
            panel.innerHTML = '';

            Object.keys(timelineData).forEach(date => {{
                const data = timelineData[date];
                const item = document.createElement('div');
                item.className = 'timeline-item';
                item.innerHTML = `
                    <div class="timeline-date">${{date}}</div>
                    <div class="timeline-stats">
                        ë¶„ì„: ${{data.total_stocks}}ê°œ
                        <span class="signal-badge">${{data.signals}}ê°œ ì‹ í˜¸</span>
                    </div>
                `;
                item.onclick = () => selectDate(date);
                panel.appendChild(item);
            }});
        }}

        // ë‚ ì§œ ì„ íƒ
        function selectDate(date) {{
            selectedDate = date;

            // íƒ€ì„ë¼ì¸ í™œì„±í™” í‘œì‹œ
            document.querySelectorAll('.timeline-item').forEach(item => {{
                item.classList.remove('active');
            }});
            event.currentTarget.classList.add('active');

            // ì¢…ëª© ë¦¬ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
            const data = timelineData[date];
            document.getElementById('selected-date').textContent = date;
            document.getElementById('selected-stats').textContent =
                `${{data.signals}}ê°œ ì§„ì… ì‹ í˜¸ (ì´ ${{data.total_stocks}}ê°œ ë¶„ì„)`;

            const stocksList = document.getElementById('stocks-list');
            stocksList.innerHTML = '';

            if (data.stocks.length === 0) {{
                stocksList.innerHTML = '<div class="empty-state"><p>ì§„ì… ì‹ í˜¸ ì—†ìŒ</p></div>';
                return;
            }}

            data.stocks.forEach(stock => {{
                const item = document.createElement('div');
                item.className = 'stock-item';

                const returnPct = stock.return_pct || 0;
                const returnClass = returnPct > 0 ? 'positive' : 'negative';

                item.innerHTML = `
                    <div class="stock-name">${{stock.ticker}}</div>
                    <div class="stock-info">
                        <span>RS <span class="stock-score">${{stock.rs_rating}}</span></span>
                        <span>Ryan <span class="stock-score">${{stock.ryan_score}}</span></span>
                        <span class="${{returnClass}}">${{returnPct > 0 ? '+' : ''}}${{returnPct.toFixed(1)}}%</span>
                    </div>
                `;
                item.onclick = () => selectStock(stock.ticker, date, stock);
                stocksList.appendChild(item);
            }});
        }}

        // ì¢…ëª© ì„ íƒ ë° ì°¨íŠ¸ í‘œì‹œ
        function selectStock(ticker, entryDate, stockData) {{
            selectedTicker = ticker;

            // í™œì„±í™” í‘œì‹œ
            document.querySelectorAll('.stock-item').forEach(item => {{
                item.classList.remove('active');
            }});
            event.currentTarget.classList.add('active');

            // ì°¨íŠ¸ ê·¸ë¦¬ê¸°
            const history = stockHistory[ticker];
            if (!history) return;

            // ì§„ì… ë‚ ì§œ ì¸ë±ìŠ¤ ì°¾ê¸°
            const entryIdx = history.dates.indexOf(entryDate);
            const entryPrice = stockData.price;
            const currentPrice = history.current_price;
            const returnPct = ((currentPrice - entryPrice) / entryPrice * 100).toFixed(2);
            const returnClass = returnPct > 0 ? 'positive' : 'negative';

            const chartPanel = document.getElementById('chart-content');
            chartPanel.innerHTML = `
                <div class="chart-header">
                    <div class="chart-title">${{ticker}}</div>
                    <div class="chart-meta">
                        <div class="meta-item">
                            ì§„ì…ì¼: <span class="meta-value">${{entryDate}}</span>
                        </div>
                        <div class="meta-item">
                            ì§„ì…ê°€: <span class="meta-value">${{entryPrice.toLocaleString()}}ì›</span>
                        </div>
                        <div class="meta-item">
                            í˜„ì¬ê°€: <span class="meta-value">${{currentPrice.toLocaleString()}}ì›</span>
                        </div>
                        <div class="meta-item">
                            ìˆ˜ìµë¥ : <span class="meta-value ${{returnClass}}">${{returnPct > 0 ? '+' : ''}}${{returnPct}}%</span>
                        </div>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="price-chart"></canvas>
                </div>
                <div class="score-cards">
                    <div class="score-card">
                        <div class="score-label">RS Rating ë³€í™”</div>
                        <div class="score-value">${{stockData.rs_rating}} â†’ ${{history.rs_ratings[history.rs_ratings.length-1]}}</div>
                    </div>
                    <div class="score-card">
                        <div class="score-label">Ryan Score ë³€í™”</div>
                        <div class="score-value">${{stockData.ryan_score}} â†’ ${{history.ryan_scores[history.ryan_scores.length-1]}}</div>
                    </div>
                    <div class="score-card">
                        <div class="score-label">Minervini Score ë³€í™”</div>
                        <div class="score-value">${{stockData.minervini_score}} â†’ ${{history.minervini_scores[history.minervini_scores.length-1]}}</div>
                    </div>
                </div>
            `;

            if (currentChart) {{
                currentChart.destroy();
            }}

            const ctx = document.getElementById('price-chart');
            currentChart = new Chart(ctx, {{
                type: 'line',
                data: {{
                    labels: history.dates,
                    datasets: [{{
                        label: 'ê°€ê²©',
                        data: history.prices,
                        borderColor: '#667eea',
                        borderWidth: 3,
                        fill: false,
                        tension: 0.1,
                        pointRadius: 0
                    }}]
                }},
                options: {{
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {{
                        legend: {{ display: false }},
                        tooltip: {{
                            backgroundColor: '#1e222d',
                            titleColor: '#d1d4dc',
                            bodyColor: '#d1d4dc',
                            callbacks: {{
                                label: (context) => `ê°€ê²©: ${{context.parsed.y.toLocaleString()}}ì›`
                            }}
                        }},
                        annotation: {{
                            annotations: {{
                                entry: {{
                                    type: 'line',
                                    xMin: entryIdx,
                                    xMax: entryIdx,
                                    borderColor: '#26a69a',
                                    borderWidth: 2,
                                    borderDash: [5, 5],
                                    label: {{
                                        display: true,
                                        content: 'ì§„ì…',
                                        position: 'start',
                                        backgroundColor: '#26a69a',
                                        color: 'white'
                                    }}
                                }},
                                entryPrice: {{
                                    type: 'line',
                                    yMin: entryPrice,
                                    yMax: entryPrice,
                                    borderColor: '#ffd700',
                                    borderWidth: 2,
                                    borderDash: [5, 5],
                                    label: {{
                                        display: true,
                                        content: 'ì§„ì…ê°€',
                                        position: 'end',
                                        backgroundColor: '#ffd700',
                                        color: '#000'
                                    }}
                                }}
                            }}
                        }}
                    }},
                    scales: {{
                        x: {{
                            grid: {{ color: '#2a2e39' }},
                            ticks: {{ color: '#787b86', maxTicksLimit: 10 }}
                        }},
                        y: {{
                            grid: {{ color: '#2a2e39' }},
                            ticks: {{
                                color: '#787b86',
                                callback: value => value.toLocaleString() + 'ì›'
                            }}
                        }}
                    }}
                }}
            }});
        }}

        // ì´ˆê¸°í™”
        renderTimeline();
    </script>
</body>
</html>
